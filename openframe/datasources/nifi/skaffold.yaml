apiVersion: skaffold/v4beta13
kind: Config
metadata:
  name: openframe-nifi
build:
  artifacts:
    - image: ghcr.io/flamingo-cx/openframe-nifi
      docker:
        dockerfile: Dockerfile
        buildArgs:
          NIFI_WEB_HTTPS_PORT: "8443"
          NIFI_WEB_HTTP_HOST: "0.0.0.0"
          SINGLE_USER_CREDENTIALS_USERNAME: openframe
          SINGLE_USER_CREDENTIALS_PASSWORD: password123456789
  local:
    useDockerCLI: false
    useBuildkit: true
    push: false
manifests:
  kustomize:
    paths:
    - ../../../deploy/dev/openframe-datasources/openframe-nifi
deploy:
  kubectl:
    flags:
      delete: ["--grace-period=0"]
