# Common properties shared across all services
spring:
  autoconfigure:
    exclude:
      - org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration
      - org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration
  data:
    # Common MongoDB configuration
    mongodb:
      auto-index-creation: true
      connect-timeout: 10000
      socket-timeout: 10000
      max-wait-time: 10000
      server-selection-timeout: 10000
    # Common Cassandra configuration
    cassandra:
      port: 9042
      local-datacenter: datacenter1
      keyspace-name: openframe_events
      schema-action: CREATE_IF_NOT_EXISTS
      request:
        timeout: 20s
      connection:
        connect-timeout: 20s
        init-query-timeout: 20s
      controlconnection:
        timeout: 20s
      advanced:
        timestamp-generator:
          class: com.datastax.oss.driver.internal.core.time.ServerSideTimestampGenerator

# Common monitoring configuration
management:
  endpoints:
    web:
      exposure:
        include: prometheus,health,info,metrics
      base-path: /actuator
      path-mapping:
        prometheus: metrics
    enabled-by-default: false
  endpoint:
    health:
      enabled: true
      show-details: always
    prometheus:
      enabled: true
      cache:
        time-to-live: 1000ms
    metrics:
      enabled: true
    info:
      enabled: true
  prometheus:
    metrics:
      export:
        enabled: true
        descriptions: true
        step: 1m
  metrics:
    enable:
      all: true
    use-global-registry: true
    web:
      server:
        request:
          autotime:
            enabled: true
    tags:
      application: ${spring.application.name}
    distribution:
      percentiles-histogram:
        "[http.server.requests]": true
      sla:
        "[http.server.requests]": [10ms, 50ms, 100ms, 200ms, 500ms]

# Common security configuration
security:
  jwt:
    enabled: false

logging:
  level:
    org.springframework.data.cassandra: DEBUG
    com.datastax.oss.driver: DEBUG
    com.openframe.data.config: DEBUG
    # Actuator and metrics logging
    org.springframework.boot.actuate: DEBUG
    org.springframework.boot.actuate.metrics: TRACE
    org.springframework.boot.actuate.endpoint: DEBUG
    org.springframework.boot.actuate.endpoint.web: TRACE
    org.springframework.boot.actuate.metrics.export.prometheus: TRACE
    io.micrometer: DEBUG
    io.micrometer.prometheus: TRACE
    io.micrometer.core.instrument.logging: TRACE
    org.springframework.web.servlet.mvc.method.annotation: DEBUG
    org.springframework.web.servlet.handler: TRACE  # For detailed request mapping

# Add content type configuration
spring:
  mvc:
    contentnegotiation:
      favor-parameter: true
      media-types:
        actuator: application/vnd.spring-boot.actuator.v3+json


      