{{- if .Values.servicemonitor.enabled }}
apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  name: pinot
  labels:
    app: pinot
spec:
  endpoints:
    - port: jmx
      path: /metrics
      interval: 30s
#       relabelings:
#         - action: replace
#           sourceLabels: [__meta_kubernetes_pod_name]
#           targetLabel: pod
#         - action: replace
#           sourceLabels: [__meta_kubernetes_namespace]
#           targetLabel: namespace
#         - action: replace
#           sourceLabels: [__meta_kubernetes_pod_label_component]
#           targetLabel: component
  namespaceSelector:
    matchNames:
    - datasources
  selector:
    matchLabels:
      app: pinot
{{- end }}
