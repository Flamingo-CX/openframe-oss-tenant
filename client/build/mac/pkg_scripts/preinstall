#!/bin/bash
# Simple preinstall script
echo "OpenFrame: Starting preinstall script..."

# Unload existing LaunchDaemon if it exists
if [ -f "/Library/LaunchDaemons/com.openframe.agent.plist" ]; then
    launchctl unload "/Library/LaunchDaemons/com.openframe.agent.plist" 2>/dev/null || true
fi

# Stop any running processes
pkill -f openframe 2>/dev/null || true

# Remove existing app bundle if it exists
if [ -d "/Applications/OpenFrame.app" ]; then
    rm -rf "/Applications/OpenFrame.app" || true
fi

echo "OpenFrame: Preinstall completed"
exit 0 