  # loki:
  #   image: grafana/loki:latest
  #   container_name: openframe-loki
  #   ports:
  #     - "3100:3100"
  #   command:
  #     - "-config.file=/etc/loki/local-config.yaml"
  #     - "-config.expand-env=true"
  #     - "-validation.allow-structured-metadata=false"
  #   environment:
  #     - LOKI_RETENTION_PERIOD=24h
  #   volumes:
  #     - ./monitoring/loki:/etc/loki
  #     - loki_data:/loki
  #   networks:
  #     - openframe-network
  #   healthcheck:
  #     test: ["CMD-SHELL", "wget -q --spider --tries=1 http://localhost:3100/ready || exit 1"]
  #     interval: 30s
  #     timeout: 10s
  #     retries: 10
  #     start_period: 40s
  #   restart: unless-stopped

# auth_enabled: false

# server:
#   http_listen_port: 3100
#   log_level: debug

# common:
#   path_prefix: /loki

# ingester:
#   lifecycler:
#     address: 127.0.0.1
#     ring:
#       kvstore:
#         store: inmemory
#       replication_factor: 1
#     final_sleep: 0s
#   chunk_idle_period: 1h
#   chunk_target_size: 1048576
#   max_chunk_age: 1h
#   wal:
#     enabled: true
#     dir: /loki/wal

# distributor:
#   ring:
#     kvstore:
#       store: inmemory

# schema_config:
#   configs:
#     - from: 2023-01-01
#       store: boltdb-shipper
#       object_store: filesystem
#       schema: v12
#       index:
#         prefix: index_
#         period: 24h

# storage_config:
#   boltdb_shipper:
#     active_index_directory: /loki/index
#     cache_location: /loki/boltdb-cache
#     cache_ttl: 24h
#   filesystem:
#     directory: /loki/chunks

# compactor:
#   working_directory: /loki/compactor
#   compaction_interval: 10m
#   retention_enabled: true
#   retention_delete_delay: 2h
#   delete_request_store: filesystem

# limits_config:
#   ingestion_rate_mb: 32
#   ingestion_burst_size_mb: 64
#   max_global_streams_per_user: 5000
#   reject_old_samples: true
#   reject_old_samples_max_age: 720h
#   retention_period: 720h
#   creation_grace_period: 24h
#   max_cache_freshness_per_query: 10m
#   split_queries_by_interval: 15m

# query_range:
#   align_queries_with_step: true
#   cache_results: true
#   max_retries: 5
#   results_cache:
#     cache:
#       embedded_cache:
#         enabled: true
#         max_size_mb: 100

# frontend:
#   compress_responses: true
#   log_queries_longer_than: 10s

# analytics:
#   reporting_enabled: false


loki:
  auth_enabled: false

  server:
    http_listen_port: 3100
    log_level: debug

  commonConfig:
    path_prefix: /loki

  ingester:
    lifecycler:
      address: 127.0.0.1
      ring:
        kvstore:
          store: inmemory
        replication_factor: 1
      final_sleep: 0s
    chunk_idle_period: 1h
    chunk_target_size: 1048576
    max_chunk_age: 1h
    wal:
      enabled: true
      dir: /loki/wal

  distributor:
    ring:
      kvstore:
        store: inmemory

  schemaConfig:
    configs:
      - from: 2023-01-01
        store: boltdb-shipper
        object_store: filesystem
        schema: v12
        index:
          prefix: index_
          period: 24h

  storageConfig:
    boltdb_shipper:
      active_index_directory: /loki/index
      cache_location: /loki/boltdb-cache
      cache_ttl: 24h
    filesystem:
      directory: /loki/chunks

  compactor:
    working_directory: /loki/compactor
    compaction_interval: 10m
    retention_enabled: true
    retention_delete_delay: 2h
    delete_request_store: filesystem

  limitsConfig:
    ingestion_rate_mb: 32
    ingestion_burst_size_mb: 64
    max_global_streams_per_user: 5000
    reject_old_samples: true
    reject_old_samples_max_age: 720h
    retention_period: 720h
    creation_grace_period: 24h
    max_cache_freshness_per_query: 10m
    split_queries_by_interval: 15m

  query_range:
    align_queries_with_step: true
    cache_results: true
    max_retries: 5
    results_cache:
      cache:
        embedded_cache:
          enabled: true
          max_size_mb: 100

  frontend:
    compress_responses: true
    log_queries_longer_than: 10s

  analytics:
    reporting_enabled: false
