apiVersion: v1
kind: Service
metadata:
  name: tactical-postgres
spec:
  selector:
    app: tactical-postgres
  ports:
  - port: 5432
    targetPort: 5432
---
apiVersion: v1
kind: Service
metadata:
  name: tactical-redis
spec:
  selector:
    app: tactical-redis
  ports:
  - port: 6379
    targetPort: 6379
---
apiVersion: v1
kind: Service
metadata:
  name: tactical-frontend
spec:
  selector:
    app: tactical-frontend
  ports:
  - port: 8080
    targetPort: 8080
---
apiVersion: v1
kind: Service
metadata:
  name: tactical-nginx
spec:
  selector:
    app: tactical-nginx
  ports:
  - name: http
    port: 8080
    targetPort: 8080
  - name: api
    port: 8000
    targetPort: 8000
---
apiVersion: v1
kind: Service
metadata:
  name: tactical-backend
spec:
  selector:
    app: tactical-backend
  ports:
  - port: 8000
    targetPort: 8000
---
apiVersion: v1
kind: Service
metadata:
  name: tactical-nats
spec:
  selector:
    app: tactical-nats
  ports:
  - name: http
    port: 9235
    targetPort: 9235
  - name: websocket
    port: 4222
    targetPort: 4222
---
apiVersion: v1
kind: Service
metadata:
  name: tactical-websockets
spec:
  selector:
    app: tactical-websockets
  ports:
  - port: 8000
    targetPort: 8000
---
apiVersion: v1
kind: Service
metadata:
  name: tactical-celery
spec:
  selector:
    app: tactical-celery
  ports:
  - port: 8000
    targetPort: 8000
---
apiVersion: v1
kind: Service
metadata:
  name: tactical-celerybeat
spec:
  selector:
    app: tactical-celerybeat
  ports:
  - port: 8000
    targetPort: 8000
---
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: tactical-rmm
  annotations:
    nginx.ingress.kubernetes.io/rewrite-target: /
spec:
  rules:
    - host: tactical-rmm.192.168.100.100.nip.io
      http:
        paths:
          - path: /
            pathType: Prefix
            backend:
              service:
                name: tactical-nginx
                port:
                  number: 8080
